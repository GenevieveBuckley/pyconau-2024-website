




<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Follow the Postgres brick road: a journey of testing against a real database server ::  PyCon AU 2024 :: pretalx</title>
        <meta name="title" content="Follow the Postgres brick road: a journey of testing against a real database server  - PyCon AU 2024 pretalx">
        <meta name="description" content="Tests are good. Code that uses a database is good. Testing code that uses a database is great… But it&#x27;s not so easy to do well. Let&#x27;s follow our journey through various pitfalls to make testing against a local PostgreSQL instance informative, reliable and fast, so that we have fewer horrible surprises once code gets to production.">
        <meta name="application-name" content="pretalx">
        <meta name="generator" content="pretalx">
        <meta name="keywords" content="PyCon AU 2024, pycon-au-2024, 2024, schedule, talks, cfp, call for papers, conference, submissions, organizer">
        
        
            <meta name="robots" content="index, follow">
        
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#00B159">
        <meta name="HandheldFriendly" content="True"/>
        
    <meta property="thumbnail" content="https://pretalx.com/pycon-au-2024/talk/UKJB7J/og-image">
    <meta property="og:image" content="https://pretalx.com/pycon-au-2024/talk/UKJB7J/og-image">

        <meta property="og:title" content="Follow the Postgres brick road: a journey of testing against a real database server PyCon AU 2024">
        <meta property="og:description" content="Tests are good. Code that uses a database is good. Testing code that uses a database is great… But it&#x27;s not so easy to do well. Let&#x27;s follow our journey through various pitfalls to make testing against a local PostgreSQL instance informative, reliable and fast, so that we have fewer horrible surprises once code gets to production.">
        <meta property="og:url" content="http://testserver/pycon-au-2024/talk/UKJB7J/">
        <meta property="twitter:card" content="summary">

        


    <link rel="icon" type="image/png" sizes="16x16" href="/static/common/img/icons/favicon.f79e2b95f18d.ico">
    <link rel="apple-touch-icon" href="/static/common/img/icons/apple-touch-icon-180x180.9cd0735ee8ec.png">



        <link rel="stylesheet" type="text/css" href="/static/common/scss/uncompressed.cabbf3759e3e.css" />
        
            <link rel="stylesheet" type="text/css" href="/static/vendored/fullcalendar/fullcalendar.min.ba055a2cd2b3.css"/>
            <link rel="stylesheet" type="text/css" href="/media/pycon-au-2024/cfp.45696e4e6cfb06b9.css"/>
            <link rel="stylesheet" type="text/css" href="/media/pycon-au-2024/agenda.e6ca9a43c7217ad7.css"/>
        
        
        <script src="/static/CACHE/js/output.8a6c26cce74b.js" defer></script>
        
    
    <link rel="alternate" type="application/json" title="PyCon AU 2024 API" href="https://pretalx.com/api/events/pycon-au-2024/talks/UKJB7J" />

    
    <script id="pretalx-messages" data-logged-in="false" src="/pycon-au-2024/schedule/widget/messages.js"></script>
    <script src="/static/CACHE/js/output.ee3f4ef9d2e8.js" async></script>
<script src="/static/CACHE/js/output.a5b490466975.js"></script>
    <link rel="stylesheet" href="/static/CACHE/css/output.07f5ae334b50.css" type="text/css">


    </head>
    <body data-datetimeformat="YYYY-MM-DD HH:mm:ss" data-dateformat="YYYY-MM-DD" data-datetimelocale="en">
        <div id="top-bg" class="header bg-primary">
            
        </div>
        
        <div class="container" id="main-container">
            <header>
                <h1>
                    <a href="
    
    
        /pycon-au-2024/schedule/
    
">
                        
                            PyCon AU 2024
                        
                    </a>
                </h1>
                <div class="d-flex" id="header-row">
                    
                    
                </div>
            </header>
            <div class="card" id="main-card">
                <main>
                    

                    
    
    
    <article>
        
        <h3 class="talk-title">
            <div class="heading-with-buttons">
                <span>
                    Follow the Postgres brick road: a journey of testing against a real database server
                    <button class="btn btn-xs btn-link d-none" id="fav-button">
                        <i class="fa fa-star-o d-none" title="Favourite this session"></i>
                        <i class="fa fa-star d-none" title="Remove this session from your favourites"></i>
                    </button>
                </span>
                <div class="buttons" id="talk-buttons">
                    
                        <a class="btn btn-outline-primary" href="/pycon-au-2024/talk/UKJB7J.ics">
                            <i class="fa fa-calendar"></i> .ical
                        </a>
                    
                    
                    
                </div>
            </div>
            <small>
                
                    11-24, 11:55–12:25 (Australia/Melbourne), Eureka 2
                    
                
                
                
            </small>
        </h3>
        <div class="talk row">
            <div class="talk-content">
                
                
                
                <section class="abstract">
                    <p>Tests are good. Code that uses a database is good. Testing code that uses a database is great… But it's not so easy to do well. Let's follow our journey through various pitfalls to make testing against a local PostgreSQL instance informative, reliable and fast, so that we have fewer horrible surprises once code gets to production.</p>
                </section>
                <hr />
                <section class="description">
                    <p>We follow the usual approach for building an application: store data in a database. Our method is SQLAlchemy models in our Python code, and migrations to evolve the schema. </p>
<p>We also have the usual desire for these applications: they should work, and <em>continue</em> to work as we make changes. One key method is automated tests.</p>
<p>Managing both of these at once is surprisingly subtle, but it's also good to solve: no-one likes having behaviour in production be a surprise because a test made incorrect assumptions about how the database behaves.</p>
<p>I’ll walk us along our database testing trail, stopping in at attractions like (not) using SQLite, ensuring migrations and models match, efficiently instantiating databases with the right schemas, isolated and parallel execution, and even optimising how each individual tests runs.</p>
                </section>
                
            </section>
            
            <section>
                
            </section>
        </div>
    </div>
    
        
            <div class="pretalx-session">
                <div class="pretalx-session-time-box avatar">
                    <a href="/pycon-au-2024/speaker/PGYLJB/">
                        <div class="avatar-wrapper">
                            
                                <img loading="lazy" src="/media/avatars/profile.jpg_IRjIpGe.png" alt="The speaker’s profile picture">
                            
                        </div>
                    </a>
                </div>
                <div class="pretalx-session-info">
                    <div class="title">
                        <a href="/pycon-au-2024/speaker/PGYLJB/">Huon Wilson</a>
                    </div>
                    <div class="abstract"><p>Huon is a software engineer aiming to make others more effective. He's now writing and deploying Python extensively at ExoFlare, and has previously worked on dev tools and programming languages at Mozilla and Apple and machine learning research at CSIRO.</p></div>
                    
                </div>
            </div>
        
    
    </article>


                </main>
            </div>
            <footer>
                
                    <div id="exporttimestamp" class="text-muted">
                        
                        This is a static export generated at 2024-09-03 20:23 AEST
                    </div>
                
                



    powered by <a href="https://pretalx.com" target="_blank" rel="noopener">pretalx</a>


                
                    ·
                    <a href="mailto:program@pycon.org.au">Contact us</a>
                
                
                
                    ·
                    <a href="/pycon-au-2024/privacy">Privacy</a>
                
            </footer>
        </div>
    </body>
</html>
